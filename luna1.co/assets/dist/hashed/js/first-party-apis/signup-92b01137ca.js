var AsanaSignupUtils={signupButtons:{requestClassName:"-request",submitButtonClassName:".signupForm-submit",request:function(i){i.addClass(this.requestClassName)},reset:function(i){$(this.submitButtonClassName).removeClass(this.requestClassName)}},validateDomain:{failedEnrollment:!1,levenshteinThreshold:1,hasTriedInvalidDomain:!1,signupForm:null,emailInput:null,invalidDomainError:null,closeDomainError:null,activeErrorClass:"-active",invalidInputClass:"-invalid",setFormElements:function(i){this.signupForm=i,this.emailInput=this.signupForm.querySelector("input.signup-email"),this.invalidDomainError=this.signupForm.querySelector("#signup-email__invalid-domain"),this.closeDomainError=this.signupForm.querySelector("#signup-email__close-domain"),this.submitButton=this.signupForm.querySelector(".signupForm-submit"),this.emailInput.addEventListener("input",this.clearErrors.bind(this))},invalidateSignupForm:function(i){this.setFormElements(i),this.hasTriedInvalidDomain=!0,this.showError(this.emailInput,this.invalidDomainError),AsanaSignupUtils.signupButtons.reset($(this.submitButton))},validateEmailSuggestion:function(i){if(this.hasTriedInvalidDomain)return!0;this.setFormElements(i);var e=this.findClosestDomain(this.emailInput.value,this.levenshteinThreshold);return!e||0===e.distance||(this.hasTriedInvalidDomain=!0,AsanaAnalytics.trackSignupEventsInGtm.init("SignupError","Error Invalid Email Domain","Includes Suggestion"),this.showSuggestionError(this.emailInput,this.closeDomainError,e),!1)},showSuggestionError:function(i,e,s){try{e.querySelector(".suggested-email").innerText=s.account+"@"+s.domain}catch(i){Bugsnag.notify("Email Suggestion failed - could not find .suggested-email selector in error message")}this.showError(i,e)},showError:function(i,e){i.classList.add(this.invalidInputClass),e.classList.add(this.activeErrorClass)},hideError:function(i,e){i.classList.remove(this.invalidInputClass),e.classList.remove(this.activeErrorClass)},clearErrors:function(){this.hasTriedInvalidDomain&&(this.hasTriedInvalidDomain=!1,this.hideError(this.emailInput,this.invalidDomainError),this.hideError(this.emailInput,this.closeDomainError))},findClosestDomain:function(i,e){var s=i.split("@")[1],t=i.split("@")[0];return!!s&&AsanaEmail.personalDomains.reduce((function(i,n){var r=window.Levenshtein.get(n,s);return r>e?i:!i||r<i.distance?{domain:n,distance:r,account:t}:i}),!1)}},setLoginWithSSOSAMLCookie:function(i,e,s,t){i&&AsanaStorage.setCookie("email_domain_provider",i),!0===e?AsanaStorage.setCookie("sso_status","gsuite_required"):"enabled"===s?(AsanaStorage.setCookie("sso_status","saml_optional"),AsanaStorage.setCookie("sso_redirect",t)):"required"===s?(AsanaStorage.setCookie("sso_status","saml_required"),AsanaStorage.setCookie("sso_redirect",t)):"off"===s&&i&&"gsuite"===i&&AsanaStorage.setCookie("sso_status","gsuite_optional")},getConfirmationPageRedirect:function(){var i=AsanaHelpers.signupEmailType.isSignupEmailTypePersonal(),e=AsanaHelpers.signupEmailType.isSignupEmailTypeWork();return AsanaHelpers.tier.isTierFree()&&e?"/thanks":AsanaHelpers.tier.isTierFree()&&i?"/thank":AsanaHelpers.tier.isTierPremium()&&e?"/thank-you":AsanaHelpers.tier.isTierPremium()&&i?"/thankyou":AsanaHelpers.tier.isTierBusiness()&&e?"/confirm":AsanaHelpers.tier.isTierBusiness()&&i?"/confirmation":"/thank"},shouldGoToConfirmationPage:function(){return AsanaHelpers.billableGroupType.isFullyPaid()},getPreviousScreen:function(){return AsanaStorage.getEcommerceConfig().previous_screen},setPreviousScreen:function(i){AsanaStorage.updateEcommerceConfig((function(e){return e.previous_screen=i,e}))},getPathPriorToSignup:function(){return AsanaStorage.getEcommerceConfig().path_prior_to_signup},setPathPriorToSignup:function(i){AsanaStorage.updateEcommerceConfig((function(e){return e.path_prior_to_signup=i,e}))},isFromPricingPage:function(){var i=this.getPathPriorToSignup();return!!i&&/pricing/g.test(i)},isFromBuyPage:function(){var i=this.getPathPriorToSignup();return!!i&&/(buy-)(premium|business)/g.test(i)},isOnPricingPage:function(){return/pricing/g.test(window.location.pathname)}};