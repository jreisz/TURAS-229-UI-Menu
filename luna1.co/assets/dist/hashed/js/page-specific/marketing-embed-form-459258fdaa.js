var MarketoEmbedForm=function(e){window.MktoForms2?e?(this.formId=e.formId,this.munchkinId=e.munchkinId,this.successRedirectUrl=e.successRedirectUrl,this.baseUrl=e.baseUrl||"//resources.asana.com",this.formXDPath="/rs/"+this.munchkinId+"/images/marketo-xdframe-relative.html",this.formsAPI=window.MktoForms2,this.formElement=document.querySelector("#mktoForm_"+this.formId),this.currentPageLanguage=AsanaI18n.getCurrentPageLanguage(),this.personalEmailErrorMessageTranslations={de:"Bitte geben Sie Ihre geschäftliche E-Mail-Adresse ein.",en:"Please enter your business email.",es:"Escribe tu email laboral.",fr:"Veuillez saisir votre adresse e-mail professionnelle.",ja:"会社 (ビジネス) 用メールアドレスを入力してください。",pt:"Insira o seu e-mail empresarial."},this.personalEmailErrorMessage=this.personalEmailErrorMessageTranslations[this.currentPageLanguage],this.personalEmailError=null,this.emailInput=null,this.formElement||Bugsnag.notifyException("No form found with supplied formId. Ensure there is a form with an id: #mktoForm_"+this.formId),this.init=function(){"asana.com"===window.location.hostname&&this.formsAPI.setOptions({formXDPath:this.formXDPath}),this.formsAPI.loadForm(this.baseUrl,this.munchkinId,this.formId,function(e){e&&(this.emailInput=document.querySelector("#Email"),this.attachLeadSourceParam(e),this.createWarning(),this.attachListenerToInput(e),this.addGAId(e),e.onSuccess(this.redirectOnSuccess))}.bind(this)),this.formsAPI.whenReady(function(){this.showOptInBoxForEU()}.bind(this))}.bind(this),this.attachLeadSourceParam=function(e){var i=e.getValues();for(var a in i)if("LeadSource"===a&&"{{my.Lead Source}}"===i[a]){var s=AsanaHelpers.getParameterByName("lead_source");e.vals({LeadSource:s||""})}}.bind(this),this.redirectOnSuccess=function(e,i){return location.href=this.successRedirectUrl||i,!1}.bind(this),this.showOptInBoxForEU=function(){var e=this.formElement.querySelectorAll(".mktoFormRow"),i=this.formElement.querySelector(".mktoButtonRow"),a=Array.prototype.find.call(e,(function(e){return e.querySelector("input#Opt_In_To_Promotional_Emails__c")}));if(a){a.style.display="none",this.formElement.insertBefore(a,i);var s={"":{checked:!0,display:"none"},Albania:{checked:!1,display:"block"},Andorra:{checked:!1,display:"block"},Armenia:{checked:!1,display:"block"},Austria:{checked:!1,display:"block"},Azerbaijan:{checked:!1,display:"block"},Belarus:{checked:!1,display:"block"},Belgium:{checked:!1,display:"block"},"Bosnia and Herzegovina":{checked:!1,display:"block"},Bulgaria:{checked:!1,display:"block"},Croatia:{checked:!1,display:"block"},Cyprus:{checked:!1,display:"block"},"Czech Republic":{checked:!1,display:"block"},Denmark:{checked:!1,display:"block"},Estonia:{checked:!1,display:"block"},Finland:{checked:!1,display:"block"},France:{checked:!1,display:"block"},Georgia:{checked:!1,display:"block"},Germany:{checked:!1,display:"block"},Greece:{checked:!1,display:"block"},"Holy See (Vatican City State)":{checked:!1,display:"block"},Hungary:{checked:!1,display:"block"},Iceland:{checked:!1,display:"block"},Ireland:{checked:!1,display:"block"},Italy:{checked:!1,display:"block"},Kazakhstan:{checked:!1,display:"block"},Kosovo:{checked:!1,display:"block"},Latvia:{checked:!1,display:"block"},Liechtenstein:{checked:!1,display:"block"},Lithuania:{checked:!1,display:"block"},Luxembourg:{checked:!1,display:"block"},Malta:{checked:!1,display:"block"},"Moldova, Republic of":{checked:!1,display:"block"},Monaco:{checked:!1,display:"block"},Montenegro:{checked:!1,display:"block"},Netherlands:{checked:!1,display:"block"},"Macedonia, the Former Yugoslav Republic of":{checked:!1,display:"block"},Norway:{checked:!1,display:"block"},Poland:{checked:!1,display:"block"},Portugal:{checked:!1,display:"block"},Romania:{checked:!1,display:"block"},"Russian Federation":{checked:!1,display:"block"},"San Marino":{checked:!1,display:"block"},Serbia:{checked:!1,display:"block"},Slovakia:{checked:!1,display:"block"},Slovenia:{checked:!1,display:"block"},Spain:{checked:!1,display:"block"},Sweden:{checked:!1,display:"block"},Switzerland:{checked:!1,display:"block"},Turkey:{checked:!1,display:"block"},Ukraine:{checked:!1,display:"block"},"United Kingdom":{checked:!1,display:"block"},China:{checked:!1,display:"block"},"New Zealand":{checked:!1,display:"block"},"Korea, Republic of":{checked:!1,display:"block"},Canada:{checked:!1,display:"block"},Australia:{checked:!1,display:"block"}},t=this.formElement.querySelector("#Opt_In_To_Promotional_Emails__c"),o=this.formElement.querySelector("#Country"),c=t.parentNode.parentNode;this.formElement.insertBefore(a,i),c.style.flexDirection="row-reverse",o.addEventListener("change",(function(){var e=this.options[this.selectedIndex].value,i=s[e]||{checked:!0,display:"none"};a.style.display=i.display,t.checked=i.checked}))}}.bind(this),this.createWarning=function(){if(this.emailInput){this.personalEmailError=document.createElement("div");var e=document.createTextNode(this.personalEmailErrorMessage);this.personalEmailError.style.fontFamily="'gordita', 'Helvetica Neue', 'Helvetica', sans-serif",this.personalEmailError.appendChild(e),this.personalEmailError.classList.add("input-message","input-message--warning"),this.emailInput.parentNode.appendChild(this.personalEmailError)}else Bugsnag.notifyException("MarketoEmbedForm.createWarning expects emailInput to exist, but it does not")}.bind(this),this.showWarning=function(){this.emailInput.classList.add("-warning"),this.personalEmailError.classList.add("-active")}.bind(this),this.hideWarning=function(){this.emailInput.classList.remove("-warning"),this.personalEmailError.classList.remove("-active")}.bind(this),this.blockPersonalEmail=function(e){var i=e.getValues().Email;AsanaEmail.isPersonalEmail(i)?this.showWarning():this.hideWarning()}.bind(this),this.attachListenerToInput=function(e){this.emailInput?this.emailInput.addEventListener("input",function(){this.blockPersonalEmail(e)}.bind(this)):Bugsnag.notifyException("MarketoEmbedForm.createWarning expects emailInput to exist, but it does not")}.bind(this),this.addGAId=function(e){e.vals({googleClientID:AsanaStorage.getGATrackingId()})}):Bugsnag.notifyException("No options object was passed in as a constructor argument"):Bugsnag.notifyException("MktoForms2 has not been instantiated.")};document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".js-marketing-embed-form--marketo");e?new MarketoEmbedForm({formId:e.dataset.formId,munchkinId:e.dataset.munchkinId,successRedirectUrl:e.dataset.successRedirectUrl}).init():Bugsnag.notifyException("No marketo form found. Could not find element with class .js-marketing-embed-form--marketo")}));